#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail
set -o xtrace

# Current script dir
DOTFILES_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
DOTFILES_OS="$(uname -s)"

# Idempotent Install
for f in $DOTFILES_DIR/install-scripts/*; do [[ -f "$f" ]] && source $f; done
if [ "$DOTFILES_OS" == "Darwin" ]; then
  for f in $DOTFILES_DIR/install-scripts/osx/*; do [[ -f "$f" ]] && source $f; done
elif [ "$DOTFILES_OS" == "Linux" ]; then
  for f in $DOTFILES_DIR/install-scripts/linux/*; do [[ -f "$f" ]] && source $f; done
fi
unset f

# Local
[[ -f "$HOME/.local/install" ]] && source $HOME/.local/install;

# Add Symlinks
ln -svi $DOTFILES_DIR/.hushlogin $HOME/.hushlogin
ln -svi $DOTFILES_DIR/.curlrc $HOME/.curlrc
ln -svi $DOTFILES_DIR/.inputrc $HOME/.inputrc
ln -svi $DOTFILES_DIR/.bashrc $HOME/.bashrc
ln -svi $DOTFILES_DIR/.bash_profile $HOME/.bash_profile
ln -svi $DOTFILES_DIR/.bash_completion $HOME/.bash_completion

unset DOTFILES_DIR
unset DOTFILES_OS
