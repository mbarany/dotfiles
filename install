#!/bin/bash

# Current script dir
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Dependencies
command -v brew >/dev/null 2>&1 || { echo >&2 "Homebrew not found. Please install it from http://brew.sh/"; exit 1; }

# Install Cask Apps
if [ ! -f "/Applications/Google Chrome.app" ]; then
		brew cask install google-chrome
fi
brew cask install \
	gpgtools \
	postman \
	psequel

# Development
brew install \
	php70 --with-phpdbg \
	php70-mcrypt \
	node

# Utils
brew install \
	bash-completion \
	gh \
	awscli \
	jq \
	oniguruma \
	keybase \
	android-sdk

# More Bash Completion
brew tap homebrew/completions
brew install composer-completion gem-completion open-completion vagrant-completion

npm -g install \
	http-server \
	kkpoon-pushbullet-cli

# Add Symlinks
ln -svi $DIR/.hushlogin ~/.hushlogin
ln -svi $DIR/.curlrc ~/.curlrc
ln -svi $DIR/.inputrc ~/.inputrc
ln -svi $DIR/.bashrc ~/.bashrc
ln -svi $DIR/.bash_profile ~/.bash_profile


# Setup global gitconfig
if [ ! -f ~/.gitconfig ]; then
		echo "Setting Global Git Config..."

		# Copy gitconfig template
		cp -i $DIR/.gitconfig ~/.gitconfig

		echo "Git Author Name:"
		read git_user_name
		if [ -n "${git_user_name}" ]; then
		    git config --global user.name "$git_user_name"
		fi

		echo "Git Author Email:"
		read git_user_email
		if [ -n "${git_user_email}" ]; then
		    git config --global user.email "$git_user_email"
		fi
fi
